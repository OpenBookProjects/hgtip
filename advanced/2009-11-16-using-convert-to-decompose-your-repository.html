

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Using Convert to Decompose Your Repository / hg tip</title>
        
        
            <link href="http://feeds.feedburner.com/hgtip/" rel="alternate"
                  title="mercurial tips from hgtip.com" type="application/atom+xml" />
        
        
        
            <link rel="stylesheet" href="http://zoomquiet.github.com/hgtip/media/css/aal.css"
                  type="text/css" media="screen" charset="utf-8" />
            <link rel="stylesheet" href="http://zoomquiet.github.com/hgtip/media/css/calluna.css"
                  type="text/css" media="screen" charset="utf-8" />
            <link rel="stylesheet" href="http://zoomquiet.github.com/hgtip/media/css/style.css"
                  type="text/css" media="screen" charset="utf-8" />
            
        
        
        
        <!--GFW by China http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js-->
            <script type="text/javascript" 
                    src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
            <script type="text/javascript">
                $(document).ready(function() {
                    $('a#rhythm').click(function (){
                        $('body').css('background', 'url(/media/images/rhythm.png) repeat');
                        $('#main-wrap').css('background', 'none');
                        return false;
                    });
                });
            </script>
            <script src="http://mint.hgtip.com/?js" type="text/javascript"></script>
            
        
    </head>
    
    <body>
        <div id="main-wrap">
            <div id="header">            
                <h1><a href="http://zoomquiet.github.com/hgtip">hg tip</a></h1>
                <p id="tagline">学习 Mercurial 羽级技巧;-)</p>
            </div>
            
            <p id="navigation">
                <a href="http://zoomquiet.github.com/hgtip/">所有</a> /
                <a href="http://zoomquiet.github.com/hgtip/beginner/">初级</a> /
                <a href="http://zoomquiet.github.com/hgtip/advanced/">高阶</a>贴士 &mdash;
                <a href="http://hgtip.com/contribute/">contribute</a> &mdash;
                <a href="http://feeds.feedburner.com/hgtip/">feed</a> &mdash;
                <a href="http://twitter.com/hgtip/">twitter</a> &mdash;
                <a href="http://hgtip.com/about/">about</a>  &mdash;
                <a href="http://zoomquiet.github.com/hgtip/2011-10-28-about-translator.html">关于</a>
            </p>
            
            <div id="content">
                
                    <h2>Using Convert to Decompose Your Repository</h2>
                
                
    <p id="tip-info">
        posted by <a href="http://blog.sadphaeton.com">Thomas G. Willis</a>
        on November 16, 2009
    </p>
    
    <!-- Hyde::Article::Begin -->
    
    <p>Say you have a repository that has evolved to contain many projects (folders).
And you have decided you&#8217;d be better off if each project (folder) were a
separate repository. You can use the <code>convert</code> extension to do just that and
retain your changeset&nbsp;history.</p>
<p>For example, a repository laid out like&nbsp;this:</p>
<pre><code>/yourrepository
    /DatabaseFoo
    /SweetBusinessLogic
    /BaseUI
    /AnotherDamnContentManagementSystem
</code></pre>
<p>You may have decided at some point that AnotherDamnContentManagementSystem
really should belong in its own repository, and had you been able to predict
the future so long ago, you would have seen that it was truly a poor choice on
your part to combine them all together in one like you were still using
Perforce and assumed that this whole version control thing was a super
expensive&nbsp;operation.</p>
<p>Well lucky for you, the convert extension can help you undo this embarrassing
decision before you show your work to the Venture Capitalist you&#8217;re meeting
for&nbsp;lunch.</p>
<p>First <a href="2009-09-30-configuring-mercurial.html">enable the convert extension</a>:</p>
<pre><code>[extensions]
convert =
</code></pre>
<p>The convert command has a <code>--filemap</code> parameter which allows you to specify
what you want included in the operation and what you don&#8217;t.  You can even have
things renamed as part of the operation. A filemap for the operation we are to
perform will look like&nbsp;this:</p>
<pre><code>include AnotherDamnContentManagementSystem
rename .
</code></pre>
<p>Then your command to convert will look like&nbsp;this:</p>
<pre><code>$ hg convert --filemap myfilemap bigrepo AnotherDamnContentManagementSystem-Repo
</code></pre>
<p>And that&#8217;s it. AnotherDamnContentManagementSystem is now its own Mercurial&nbsp;repository.</p>
    
    <!-- Hyde::Article::End -->
    
    <div id="tip-comments">
        <h2>评注</h2>
        <div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/hgtipzoomquietgithubcom/embed.js"></script><noscript><a href="http://hgtipzoomquietgithubcom.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

            </div>
            
            <div id="excerpt">
                
                    <!-- Hyde::Excerpt::Begin -->
                        <p>What if your repository is too big for its own britches, and you would rather
the projects contained within be their own repositories? But darn it, what
about&nbsp;the&nbsp;history?</p>
                    <!-- Hyde::Excerpt::End -->
                
            </div>
        </div>
        <div id='footer'>
            网站由 <a href="http://stevelosh.com">steve</a> 及 <a href="/http://hgtip.com/about/">其同伙</a> &mdash;
            用 <a href="http://github.com/lakshmivyas/hyde">hyde</a> 创建 &mdash;
            使用 <a href="http://creativecommons.org/licenses/by-sa/3.0/us/">cc-by-sa</a> 许可协议&mdash;
            we've got <a id="rhythm" href="#">rhythm</a>
            <br />
            支持:
            <a href="http://hgtip.com/">english</a> &mdash;
            <a href="http://zoomquiet.github.com/hgtip/">中文</a> &mdash;
            <a href="http://de.hgtip.com/">deutsch</a> &mdash;
            <a href="http://ja.hgtip.com/">日本語</a>
        </div>
        
        
    <script type="text/javascript">
    //<![CDATA[
    (function() {
        var links = document.getElementsByTagName('a');
        var query = '?';
        for(var i = 0; i < links.length; i++) {
        if(links[i].href.indexOf('#disqus_thread') >= 0) {
            query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
        }
        }
        document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/hgtipzoomquietgithubcom/get_num_replies.js' + query + '"></' + 'script>');
    })();
    //]]>
    </script>

    </body>
</html>

